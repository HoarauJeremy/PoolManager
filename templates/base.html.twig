<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Welcome!{% endblock %}</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text><text y=%221.3em%22 x=%220.2em%22 font-size=%2276%22 fill=%22%23fff%22>sf</text></svg>">
    {% block stylesheets %}
        {{ encore_entry_link_tags('app') }}
        <style>
            body {
                margin: 0;
                padding: 0;
                background-color: #f3f4f6;
            }

            .sidebar {
                background-color: #374152;
            }

            .sidebar-icon {
                width: 3rem;
                height: 3rem;
                display: flex;
                align-items: center;
                justify-content: center;
                border-radius: 0.5rem;
                cursor: pointer;
                transition: all 0.2s;
            }

            .sidebar-icon.active {
                background-color: #b91c1c; /* red-700 */
                box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            }

            .sidebar-icon:not(.active):hover {
                background-color: #374151; /* gray-700 */
            }

            .main-content {
                margin-left: 5rem;
                padding: 2rem;
                min-height: 100vh;
                width: calc(100% - 5rem);
            }
        </style>
    {% endblock %}

    {% block javascripts %}
        {{ encore_entry_script_tags('app') }}
    {% endblock %}
</head>
<body>
<!-- Sidebar -->
<div class="sidebar w-20 flex flex-col items-center py-8 fixed h-screen z-10">
    <!-- Navigation Icons -->
    <div class="flex flex-col items-center space-y-6">
        <!-- Logo Dashboard -->
        <a href="{{ path('app_dashboard') }}">
            <div class="sidebar-icon {% if app.request.attributes.get('_route') == 'app_dashboard' %}active{% endif %}">
                <i class='bx bxs-dashboard text-2xl {% if app.request.attributes.get('_route') == 'app_dashboard' %}text-white{% else %}text-gray-400{% endif %}'></i>
            </div>
        </a>

        <!-- Icône Types d'intervention -->
        <a href="{{ path('app_type_intervention_index') }}">
            <div class="sidebar-icon {% if app.request.attributes.get('_route') starts with 'app_type_intervention' %}active{% endif %}">
                <i class='bx bx-building-house text-2xl {% if app.request.attributes.get('_route') starts with 'app_type_intervention' %}text-white{% else %}text-gray-400{% endif %}'></i>
            </div>
        </a>

        <!-- Icône Interventions/Jobs -->
        <a href="{{ path('app_intervention_index') }}">
            <div class="sidebar-icon {% if app.request.attributes.get('_route') starts with 'app_intervention' %}active{% endif %}">
                <i class='bx bx-briefcase text-2xl {% if app.request.attributes.get('_route') starts with 'app_intervention' %}text-white{% else %}text-gray-400{% endif %}'></i>
            </div>
        </a>

        <!-- Icône Clients -->
        <a href="{{ path('app_client_index') }}">
            <div class="sidebar-icon {% if app.request.attributes.get('_route') starts with 'app_client' %}active{% endif %}">
                <i class='bx bx-group text-2xl {% if app.request.attributes.get('_route') starts with 'app_client' %}text-white{% else %}text-gray-400{% endif %}'></i>
            </div>
        </a>

        <!-- Icône Calendrier -->
        <a href="{{ path('app_dashboard') }}">
            <div class="sidebar-icon">
                <i class='bx bx-calendar text-2xl text-gray-400'></i>
            </div>
        </a>
    </div>

    <!-- Icônes d'administration (en bas) -->
    <div class="mt-auto">
        {% if is_granted('ROLE_ADMIN') %}
        <a href="{{ path('app_register') }}" title="Ajouter un utilisateur">
            <div class="sidebar-icon group">
                <i class='bx bx-user-plus text-2xl text-gray-400 group-hover:text-white transition-colors'></i>
            </div>
        </a>
        {% endif %}
        
        <a href="#" title="Paramètres">
            <div class="sidebar-icon group">
                <i class='bx bx-cog text-2xl text-gray-400 group-hover:text-white transition-colors'></i>
            </div>
        </a>
        <a href="{{ path('app_logout') }}">
            <div class="sidebar-icon">
                <i class='bx bx-log-out text-2xl text-gray-400'></i>
            </div>
        </a>
    </div>
</div>
<div class="main-content">
    {% block body %}{% endblock %}
</div>
</body>
</html>
